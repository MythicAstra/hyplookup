plugins {
    id 'java'
    id 'org.jetbrains.kotlin.jvm' version '2.0.20'
}

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    implementation 'net.sharedwonder:lightproxy:0.1.0'

    implementation 'com.google.code.gson:gson:2.11.0'
    implementation 'io.netty:netty-buffer:4.1.115.Final'
    implementation 'org.apache.logging.log4j:log4j-api:2.24.1'
    implementation 'org.jspecify:jspecify:1.0.0'
}

java {
    toolchain.languageVersion = JavaLanguageVersion.of(21)
    withSourcesJar()
}

kotlin {
    compilerOptions.freeCompilerArgs.add('-Xjvm-default=all')
}

tasks.withType(JavaCompile) {
    options.encoding 'UTF-8'
}

processResources {
    filesMatching('lightproxy-addon.json') {
        expand(version: version)
    }
}
